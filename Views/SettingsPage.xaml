<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:MauiApp.ViewModels"
             xmlns:models="clr-namespace:MauiApp.Models"
             x:Class="MauiApp.Views.SettingsPage"
             Title="ì„¤ì •"
             x:DataType="vm:SettingsViewModel">

    <ScrollView Padding="20">
        <VerticalStackLayout Spacing="20">
            
            <!-- ë³´í˜¸ ë™ìž‘ ì„¤ì • -->
            <Frame BorderColor="{StaticResource Primary}" 
                   HasShadow="True"
                   Padding="15"
                   CornerRadius="10">
                <VerticalStackLayout Spacing="15">
                    <Label Text="ë³´í˜¸ ë™ìž‘ ì„¤ì •" 
                           FontSize="18"
                           FontAttributes="Bold"/>
                    
                    <Label Text="ì—¿ë³´ê¸°ê°€ ê°ì§€ë˜ì—ˆì„ ë•Œ ìˆ˜í–‰í•  ë™ìž‘ì„ ì„ íƒí•˜ì„¸ìš”."
                           FontSize="12"
                           TextColor="{StaticResource Gray600}"/>

                    <RadioButton Content="í™”ë©´ ë¸”ëŸ¬ ì²˜ë¦¬" 
                                 IsChecked="{Binding SelectedProtectionAction, Converter={StaticResource EnumToBoolConverter}, ConverterParameter={x:Static models:ProtectionAction.Blur}}"
                                 GroupName="ProtectionAction"/>
                    
                    <RadioButton Content="ìœ„ìž¥ í™”ë©´ í‘œì‹œ" 
                                 IsChecked="{Binding SelectedProtectionAction, Converter={StaticResource EnumToBoolConverter}, ConverterParameter={x:Static models:ProtectionAction.Disguise}}"
                                 GroupName="ProtectionAction"/>
                    
                    <RadioButton Content="í™”ë©´ ê°€ë¦¬ê¸°" 
                                 IsChecked="{Binding SelectedProtectionAction, Converter={StaticResource EnumToBoolConverter}, ConverterParameter={x:Static models:ProtectionAction.Cover}}"
                                 GroupName="ProtectionAction"/>
                    
                    <RadioButton Content="ì§„ë™ë§Œ" 
                                 IsChecked="{Binding SelectedProtectionAction, Converter={StaticResource EnumToBoolConverter}, ConverterParameter={x:Static models:ProtectionAction.VibrateOnly}}"
                                 GroupName="ProtectionAction"/>
                </VerticalStackLayout>
            </Frame>

            <!-- ê°ì§€ ì„¤ì • -->
            <Frame BorderColor="{StaticResource Primary}" 
                   HasShadow="True"
                   Padding="15"
                   CornerRadius="10">
                <VerticalStackLayout Spacing="15">
                    <Label Text="ê°ì§€ ì„¤ì •" 
                           FontSize="18"
                           FontAttributes="Bold"/>
                    
                    <VerticalStackLayout Spacing="5">
                        <Label Text="{Binding ThresholdSeconds, StringFormat='ì§€ì† ì£¼ì‹œ ì‹œê°„: {0:F1}ì´ˆ'}"
                               FontSize="14"/>
                        <Slider Minimum="0.5" 
                                Maximum="5.0" 
                                Value="{Binding ThresholdSeconds}"
                                MinimumTrackColor="{StaticResource Primary}"/>
                        <Label Text="ì´ ì‹œê°„ ì´ìƒ ì¸¡ë©´ì—ì„œ ì£¼ì‹œí•˜ë©´ ì—¿ë³´ê¸°ë¡œ íŒë‹¨í•©ë‹ˆë‹¤."
                               FontSize="10"
                               TextColor="{StaticResource Gray600}"/>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- ì•Œë¦¼ ì„¤ì • -->
            <Frame BorderColor="{StaticResource Primary}" 
                   HasShadow="True"
                   Padding="15"
                   CornerRadius="10">
                <VerticalStackLayout Spacing="15">
                    <Label Text="ì•Œë¦¼ ì„¤ì •" 
                           FontSize="18"
                           FontAttributes="Bold"/>
                    
                    <Grid ColumnDefinitions="*,Auto" ColumnSpacing="10">
                        <Label Text="ì§„ë™ ì•Œë¦¼" 
                               VerticalOptions="Center"
                               FontSize="16"/>
                        <Switch Grid.Column="1" 
                                IsToggled="{Binding VibrateEnabled}"
                                OnColor="{StaticResource Primary}"/>
                    </Grid>

                    <BoxView HeightRequest="1" 
                             BackgroundColor="{StaticResource Gray300}"/>

                    <Grid ColumnDefinitions="*,Auto" ColumnSpacing="10">
                        <Label Text="ì†Œë¦¬ ì•Œë¦¼" 
                               VerticalOptions="Center"
                               FontSize="16"/>
                        <Switch Grid.Column="1" 
                                IsToggled="{Binding SoundEnabled}"
                                OnColor="{StaticResource Primary}"/>
                    </Grid>
                </VerticalStackLayout>
            </Frame>

            <!-- ë³´ì•ˆ ì„¤ì • -->
            <Frame BorderColor="{StaticResource Primary}" 
                   HasShadow="True"
                   Padding="15"
                   CornerRadius="10">
                <VerticalStackLayout Spacing="15">
                    <Label Text="ë³´ì•ˆ ì„¤ì •" 
                           FontSize="18"
                           FontAttributes="Bold"/>
                    
                    <Grid ColumnDefinitions="*,Auto" ColumnSpacing="10">
                        <VerticalStackLayout>
                            <Label Text="ì—¿ë³´ëŠ” ì‚¬ëžŒ ì‚¬ì§„ ì´¬ì˜" 
                                   FontSize="16"/>
                            <Label Text="ê°ì§€ ì‹œ ìžë™ìœ¼ë¡œ ì‚¬ì§„ì„ ì €ìž¥í•©ë‹ˆë‹¤."
                                   FontSize="10"
                                   TextColor="{StaticResource Gray600}"/>
                        </VerticalStackLayout>
                        <Switch Grid.Column="1" 
                                IsToggled="{Binding CapturePhotoEnabled}"
                                OnColor="{StaticResource Primary}"
                                VerticalOptions="Center"/>
                    </Grid>
                </VerticalStackLayout>
            </Frame>

            <!-- í”„ë¼ì´ë²„ì‹œ ì •ë³´ -->
            <Frame BorderColor="{StaticResource Gray300}" 
                   HasShadow="False"
                   Padding="15"
                   CornerRadius="10"
                   BackgroundColor="{StaticResource Gray100}">
                <VerticalStackLayout Spacing="10">
                    <Label Text="ðŸ”’ í”„ë¼ì´ë²„ì‹œ ë³´í˜¸" 
                           FontSize="16"
                           FontAttributes="Bold"/>
                    <Label FontSize="11" TextColor="{StaticResource Gray900}">
                        <Label.FormattedText>
                            <FormattedString>
                                <Span Text="â€¢ ëª¨ë“  ë°ì´í„°ëŠ” ê¸°ê¸° ë‚´ë¶€ì—ì„œë§Œ ì²˜ë¦¬ë©ë‹ˆë‹¤.&#10;"/>
                                <Span Text="â€¢ ì¹´ë©”ë¼ ì˜ìƒì€ ì„œë²„ë¡œ ì „ì†¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.&#10;"/>
                                <Span Text="â€¢ ì‚¬ì§„ ì´¬ì˜ ê¸°ëŠ¥ì€ ì‚¬ìš©ìžê°€ ì§ì ‘ í™œì„±í™”í•´ì•¼ í•©ë‹ˆë‹¤.&#10;"/>
                                <Span Text="â€¢ ì–¸ì œë“ ì§€ ì„¤ì •ì„ ë³€ê²½í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤."/>
                            </FormattedString>
                        </Label.FormattedText>
                    </Label>
                </VerticalStackLayout>
            </Frame>

            <!-- ì €ìž¥ ë²„íŠ¼ -->
            <Button Text="ðŸ’¾ ì„¤ì • ì €ìž¥"
                    Command="{Binding SaveCommand}"
                    BackgroundColor="{StaticResource Primary}"
                    TextColor="White"
                    HeightRequest="50"/>

            <Button Text="â† ëŒì•„ê°€ê¸°"
                    Command="{Binding BackCommand}"
                    BackgroundColor="{StaticResource Gray500}"
                    TextColor="White"/>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>

